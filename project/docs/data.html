<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.1 Data | Data Visualization in R</title>
  <meta name="description" content="3.1 Data | Data Visualization in R" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="3.1 Data | Data Visualization in R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.1 Data | Data Visualization in R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="exercises-2.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/report.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a></li>
<li class="chapter" data-level="3" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>3</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3.1</b> Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#understanding-the-grammar-of-the-plots"><i class="fa fa-check"></i><b>3.1.1</b> Understanding the grammar of the plots</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#mapping"><i class="fa fa-check"></i><b>3.1.2</b> Mapping</a></li>
<li class="chapter" data-level="3.1.3" data-path="data.html"><a href="data.html#layers"><i class="fa fa-check"></i><b>3.1.3</b> Layers</a></li>
<li class="chapter" data-level="3.1.4" data-path="data.html"><a href="data.html#colour-size-shape-and-other-aesthetic-attributes"><i class="fa fa-check"></i><b>3.1.4</b> Colour, size, shape and other aesthetic attributes</a></li>
<li class="chapter" data-level="3.1.5" data-path="data.html"><a href="data.html#exercises"><i class="fa fa-check"></i><b>3.1.5</b> Exercises</a></li>
<li class="chapter" data-level="3.1.6" data-path="data.html"><a href="data.html#facets"><i class="fa fa-check"></i><b>3.1.6</b> Facets</a></li>
<li class="chapter" data-level="3.1.7" data-path="data.html"><a href="data.html#exercises-1"><i class="fa fa-check"></i><b>3.1.7</b> Exercises</a></li>
<li class="chapter" data-level="3.1.8" data-path="data.html"><a href="data.html#coordinates---plot-geoms"><i class="fa fa-check"></i><b>3.1.8</b> Coordinates - Plot geoms</a></li>
<li class="chapter" data-level="3.1.9" data-path="data.html"><a href="data.html#adding-a-smoother-to-a-plot"><i class="fa fa-check"></i><b>3.1.9</b> Adding a smoother to a plot</a></li>
<li class="chapter" data-level="3.1.10" data-path="data.html"><a href="data.html#sec-boxplot"><i class="fa fa-check"></i><b>3.1.10</b> Boxplots and jittered points</a></li>
<li class="chapter" data-level="3.1.11" data-path="data.html"><a href="data.html#sec-distribution"><i class="fa fa-check"></i><b>3.1.11</b> Histograms and frequency polygons</a></li>
<li class="chapter" data-level="3.1.12" data-path="data.html"><a href="data.html#theme"><i class="fa fa-check"></i><b>3.1.12</b> Theme</a></li>
<li class="chapter" data-level="3.1.13" data-path="data.html"><a href="data.html#combining"><i class="fa fa-check"></i><b>3.1.13</b> Combining</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="exercises-2.html"><a href="exercises-2.html"><i class="fa fa-check"></i><b>3.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>4</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html"><i class="fa fa-check"></i><b>4.1</b> Load and prepare the data</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#data-transformation"><i class="fa fa-check"></i><b>4.1.1</b> Data transformation</a></li>
<li class="chapter" data-level="4.1.2" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#data-aggregation"><i class="fa fa-check"></i><b>4.1.2</b> Data aggregation</a></li>
<li class="chapter" data-level="4.1.3" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#remove-contaminants"><i class="fa fa-check"></i><b>4.1.3</b> Remove contaminants</a></li>
<li class="chapter" data-level="4.1.4" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#cleaning-names"><i class="fa fa-check"></i><b>4.1.4</b> Cleaning names</a></li>
<li class="chapter" data-level="4.1.5" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#plot-overall-intensity-distribution-per-replicate"><i class="fa fa-check"></i><b>4.1.5</b> Plot overall intensity distribution per replicate</a></li>
<li class="chapter" data-level="4.1.6" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#perform-principal-component-analysis-pca"><i class="fa fa-check"></i><b>4.1.6</b> Perform Principal Component Analysis (PCA)</a></li>
<li class="chapter" data-level="4.1.7" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#identify-and-plot-proteins-with-highest-fold-change-between-conditions"><i class="fa fa-check"></i><b>4.1.7</b> Identify and plot proteins with highest fold-change between conditions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5</b> Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="sec-plot-geoms.html"><a href="sec-plot-geoms.html"><i class="fa fa-check"></i><b>5.1</b> Plot geoms</a></li>
<li class="chapter" data-level="5.2" data-path="printing-all-package-versions-good-practice-to-ensure-reproducibility.html"><a href="printing-all-package-versions-good-practice-to-ensure-reproducibility.html"><i class="fa fa-check"></i><b>5.2</b> Printing all package versions (good practice to ensure reproducibility)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="wrap.html"><a href="wrap.html"><i class="fa fa-check"></i><b>6</b> Wrap</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As the foundation of every graphic, <code>ggplot2</code> uses data to construct a plot. The system works best if the data is provided in a <code>tidy</code> format (we‚Äôre going to explorer it in the next section), which briefly means a rectangular data frame structure where rows are observations and columns are variables.</p>
<p>As the first step in many plots, you would pass the data to the <code>ggplot()</code> function, which stores the data to be used later by other parts of the plotting system. For example, if we intend to make a graphic about the mpg dataset, we would start as follows:</p>
<div class="remember">
<p><strong>üìå Remember:</strong> Load the library before starting the analysis.</p>
</div>
<div class="note">
<p><strong>üìò Note:</strong> You can list all the data available in ggplot with tthe following command:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data.html#cb1-1" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">&quot;ggplot2&quot;</span>)</span></code></pre></div>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data.html#cb2-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb2-2"><a href="data.html#cb2-2" tabindex="-1"></a>mpg</span></code></pre></div>
<pre><code>## # A tibble: 234 √ó 11
##    manufacturer model      displ  year   cyl trans   drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto(l‚Ä¶ f        18    29 p     comp‚Ä¶
##  2 audi         a4           1.8  1999     4 manual‚Ä¶ f        21    29 p     comp‚Ä¶
##  3 audi         a4           2    2008     4 manual‚Ä¶ f        20    31 p     comp‚Ä¶
##  4 audi         a4           2    2008     4 auto(a‚Ä¶ f        21    30 p     comp‚Ä¶
##  5 audi         a4           2.8  1999     6 auto(l‚Ä¶ f        16    26 p     comp‚Ä¶
##  6 audi         a4           2.8  1999     6 manual‚Ä¶ f        18    26 p     comp‚Ä¶
##  7 audi         a4           3.1  2008     6 auto(a‚Ä¶ f        18    27 p     comp‚Ä¶
##  8 audi         a4 quattro   1.8  1999     4 manual‚Ä¶ 4        18    26 p     comp‚Ä¶
##  9 audi         a4 quattro   1.8  1999     4 auto(l‚Ä¶ 4        16    25 p     comp‚Ä¶
## 10 audi         a4 quattro   2    2008     4 manual‚Ä¶ 4        20    28 p     comp‚Ä¶
## # ‚Ñπ 224 more rows</code></pre>
<div class="tip">
<p><strong>üí° Tip:</strong> You can use the command <code>View</code> to visualize the data. Try it yourself.</p>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data.html#cb4-1" tabindex="-1"></a><span class="fu">View</span>(mpg)</span></code></pre></div>
<div class="advanced">
<p><strong>üß† Advanced:</strong> <a href="https://rstudio.github.io/DT/">DT</a> package is an excellent option to explore the metadata! Try it yourself.</p>
</div>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data.html#cb5-1" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb5-2"><a href="data.html#cb5-2" tabindex="-1"></a></span>
<span id="cb5-3"><a href="data.html#cb5-3" tabindex="-1"></a><span class="co">#Simple</span></span>
<span id="cb5-4"><a href="data.html#cb5-4" tabindex="-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(mpg), <span class="at">class =</span> <span class="st">&#39;cell-border stripe&#39;</span>)</span>
<span id="cb5-5"><a href="data.html#cb5-5" tabindex="-1"></a></span>
<span id="cb5-6"><a href="data.html#cb5-6" tabindex="-1"></a></span>
<span id="cb5-7"><a href="data.html#cb5-7" tabindex="-1"></a><span class="co">#Complex</span></span>
<span id="cb5-8"><a href="data.html#cb5-8" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> mpg, <span class="at">rownames =</span> <span class="cn">FALSE</span>, </span>
<span id="cb5-9"><a href="data.html#cb5-9" tabindex="-1"></a>              <span class="at">extensions =</span> <span class="fu">c</span>(<span class="st">&#39;Buttons&#39;</span>, <span class="st">&#39;Scroller&#39;</span>), </span>
<span id="cb5-10"><a href="data.html#cb5-10" tabindex="-1"></a>              <span class="at">options =</span> <span class="fu">list</span>(<span class="at">dom =</span> <span class="st">&#39;Bfrtip&#39;</span>, <span class="at">buttons =</span> <span class="fu">c</span>(<span class="st">&#39;copy&#39;</span>, <span class="st">&#39;csv&#39;</span>),</span>
<span id="cb5-11"><a href="data.html#cb5-11" tabindex="-1"></a>                             <span class="at">deferRender =</span> <span class="cn">TRUE</span>, <span class="at">scrollX =</span> T,</span>
<span id="cb5-12"><a href="data.html#cb5-12" tabindex="-1"></a>                             <span class="at">scrollX =</span> T,</span>
<span id="cb5-13"><a href="data.html#cb5-13" tabindex="-1"></a>                             <span class="at">scrollY =</span> <span class="dv">200</span>,</span>
<span id="cb5-14"><a href="data.html#cb5-14" tabindex="-1"></a>                             <span class="at">scroller =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-15"><a href="data.html#cb5-15" tabindex="-1"></a>                             <span class="at">caption =</span> <span class="st">&#39;mpg metadata&#39;</span>))</span></code></pre></div>
<p><code>mpg</code> includes information about the fuel economy of popular car models in 1999 and 2008, collected by the <a href="http://fueleconomy.gov">US Environmental Protection Agency</a></p>
<p>The variables are mostly self-explanatory:</p>
<p><code class="var-blue">cty</code> and <code class="var-blue">hwy</code> record miles per gallon (mpg) for city and highway driving.</p>
<p><code class="var-orange">displ</code> is the engine displacement in litres.</p>
<p><code class="var-blue">drv</code> is the drivetrain: front wheel (f), rear wheel (r) or four wheel (4).</p>
<p><code class="var-blue">model</code> is the model of car. There are 38 models, selected because they had a new edition every year between 1999 and 2008.</p>
<p><code class="var-orange">class</code> is a categorical variable describing the ‚Äútype‚Äù of car: two seater, SUV, compact, etc.</p>
<p>This dataset suggests many interesting questions.</p>
<p>How are engine size and fuel economy related? Do certain manufacturers care more about fuel economy than others? Has fuel economy improved in the last ten years? We will try to answer some of these questions, and in the process learn how to create some basic plots with ggplot2.</p>
<div id="understanding-the-grammar-of-the-plots" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Understanding the grammar of the plots<a href="data.html#understanding-the-grammar-of-the-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code data="var-orange">data</code></p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data.html#cb6-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="question">
<p><strong>‚ùì Question:</strong> Why is it empty?</p>
</div>
</div>
<div id="mapping" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Mapping<a href="data.html#mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The mapping of a plot is a set of instructions on how parts of the data are mapped onto aesthetic attributes of geometric objects. It is the ‚Äòdictionary‚Äô to translate tidy data to the graphics system.</p>
<p>A mapping can be made by using the <code data="var-orange">aes()</code> function to make pairs of graphical attributes and parts of the data. If we want the cty and hwy columns to map to the x- and y-coordinates in the plot, we can do that as follows:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data.html#cb7-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
<div id="layers" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Layers<a href="data.html#layers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The heart of any graphic is the layers. They take the mapped data and display it in something humans can understand as a representation of the data. Every layer consists of three important parts:</p>
<p>The geometry that determines how data are displayed, such as points, lines, or rectangles.
The statistical transformation that may compute new variables from the data and affect what of the data is displayed.
The position adjustment that primarily determines where a piece of data is being displayed.</p>
<p>A layer can be constructed using the geom_<em>() and stat_</em>() functions. These functions often determine one of the three parts of a layer, while the other two can still be specified. Here is how we can use two layers to display the cty and hwy columns of the mpg dataset as points and stack a trend line on top.</p>
<p>Here‚Äôs a simple example: </p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data.html#cb8-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> </span>
<span id="cb8-2"><a href="data.html#cb8-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>This produces a scatterplot defined by:</p>
<ol style="list-style-type: decimal">
<li>Data: <code>mpg</code>.</li>
<li>Aesthetic mapping: engine size mapped to x position, fuel economy to y position.</li>
<li>Layer: points.</li>
</ol>
<p>Pay attention to the structure of this function call: data and aesthetic mappings are supplied in <code>ggplot()</code>, then layers are added on with <code>+</code>.</p>
<div class="important">
<p><strong>‚≠ê Important:</strong> <code>+</code> is an important pattern to learn</p>
</div>
<p>This is an important pattern, and as you learn more about ggplot2 you‚Äôll construct increasingly sophisticated plots by adding on more types of components.</p>
<p>Almost every plot maps a variable to <code>x</code> and <code>y</code>, so naming these aesthetics is tedious, so the first two unnamed arguments to <code>aes()</code> will be mapped to <code>x</code> and <code>y</code>.</p>
<p>This means that the following code is identical to the example above:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data.html#cb9-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb9-2"><a href="data.html#cb9-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<div class="tip">
<p><strong>üí° Tip:</strong> Don‚Äôt forget that the first two arguments to <code>aes()</code> are <code>x</code> and <code>y</code>.</p>
</div>
<div class="note">
<p><strong>üìò Note:</strong> Note that we‚Äôve put each command on a new line.
We recommend doing this in your own code, so it‚Äôs easy to scan a plot specification and see exactly what‚Äôs there.</p>
</div>
<p>The plot shows a strong correlation: as the engine size gets bigger, the fuel economy gets worse.</p>
<p>There are also some interesting outliers: some cars with large engines get higher fuel economy than average.</p>
<div class="question">
<p><strong>‚ùì Question:</strong> WWhat sort of cars do you think they are?</p>
</div>
</div>
<div id="colour-size-shape-and-other-aesthetic-attributes" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Colour, size, shape and other aesthetic attributes<a href="data.html#colour-size-shape-and-other-aesthetic-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To add additional variables to a plot, we can use other aesthetics like colour, shape, and size</p>
<div class="extra">
<p><strong>üí° Extra:</strong> ggplot2 accepts American and British spellings</p>
</div>
<p>These work in the same way as the <code>x</code> and <code>y</code> aesthetics, and are added into the call to <code>aes()</code>: </p>
<ul>
<li><code>aes(displ, hwy, colour = class)</code></li>
<li><code>aes(displ, hwy, shape = drv)</code></li>
<li><code>aes(displ, hwy, size = cyl)</code></li>
</ul>
<p>ggplot2 takes care of the details of converting data (e.g., ‚Äòf‚Äô, ‚Äòr‚Äô, ‚Äò4‚Äô) into aesthetics (e.g., ‚Äòred‚Äô, ‚Äòyellow‚Äô, ‚Äògreen‚Äô) with a <strong>scale</strong>.</p>
<p>There is one scale for each aesthetic mapping in a plot.
The scale is also responsible for creating a guide, an axis or legend, that allows you to read the plot, converting aesthetic values back into data values.
For now, we‚Äôll stick with the default scales provided by ggplot2.</p>
<p>To learn more about those outlying variables in the previous scatterplot, we could map the class variable to colour:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data.html#cb10-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy, <span class="at">colour =</span> class)) <span class="sc">+</span> </span>
<span id="cb10-2"><a href="data.html#cb10-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>This gives each point a unique colour corresponding to its class.
The legend allows us to read data values from the colour, showing us that the group of cars with unusually high fuel economy for their engine size are two seaters: cars with big engines, but lightweight bodies.</p>
<p>If you want to set an aesthetic to a fixed value, without scaling it, do so in the individual layer outside of <code>aes()</code>.</p>
<p>Compare the following two plots:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data.html#cb11-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>))</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data.html#cb12-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
<p>In the first plot, the value ‚Äúblue‚Äù is scaled to a pinkish colour, and a legend is added.</p>
<p>In the second plot, the points are given the R colour blue.</p>
<p>This is an important technique and you‚Äôll learn more about it in <code>mapping</code>
See <code>vignette("ggplot2-specs")</code> for the values needed for colour and other aesthetics.</p>
<p>Different types of aesthetic attributes work better with different types of variables.</p>
<div class="tip">
<p><strong>üí° Tip:</strong> colour and shape work well with <strong>categorical variables</strong>, while size works well for <strong>continuous variables</strong>.</p>
</div>
<p>The amount of data also makes a difference: if there is a lot of data it can be hard to distinguish different groups.
An alternative solution is to use faceting, as described next.</p>
<p>When using aesthetics in a plot, less is usually more.
It‚Äôs difficult to see the simultaneous relationships among colour and shape and size, so exercise restraint when using aesthetics.
Instead of trying to make one very complex plot that shows everything at once, see if you can create a series of simple plots that tell a story, leading the reader from ignorance to knowledge.</p>
</div>
<div id="exercises" class="section level3 hasAnchor" number="3.1.5">
<h3><span class="header-section-number">3.1.5</span> Exercises<a href="data.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Experiment with the colour, shape and size aesthetics.
What happens when you map them to continuous values?
What about categorical values?
What happens when you use more than one aesthetic in a plot?</p></li>
<li><p>What happens if you map a continuous variable to shape?
Why?
What happens if you map <code>trans</code> to shape?
Why?</p></li>
</ol>
</div>
<div id="facets" class="section level3 hasAnchor" number="3.1.6">
<h3><span class="header-section-number">3.1.6</span> Facets<a href="data.html#facets" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Facets can be used to separate small multiples, or different subsets of the data. It is a powerful tool to quickly split up the data into smaller panels, based on one or more variables, to display patterns or trends (or the lack thereof) within the subsets.</p>
<p>The facets have their own mapping that can be given as a formula. To plot subsets of the mpg dataset based on levels of the drv and year variables, we can use facet_grid() as follows:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data.html#cb13-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cty, hwy)) <span class="sc">+</span></span>
<span id="cb13-2"><a href="data.html#cb13-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb13-3"><a href="data.html#cb13-3" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> drv)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data.html#cb14-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb14-2"><a href="data.html#cb14-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb14-3"><a href="data.html#cb14-3" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>class)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>You might wonder when to use faceting and when to use aesthetics.
You‚Äôll learn more about the relative advantages and disadvantages of each in <code>group-vs-facet</code></p>
</div>
<div id="exercises-1" class="section level3 hasAnchor" number="3.1.7">
<h3><span class="header-section-number">3.1.7</span> Exercises<a href="data.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>What happens if you try to facet by a continuous variable like <code>hwy</code>?
What about <code>cyl</code>?
What‚Äôs the key difference?</p></li>
<li><p>Use faceting to explore the 3-way relationship between fuel economy, engine size, and number of cylinders.
How does faceting by number of cylinders change your assessement of the relationship between engine size and fuel economy?</p></li>
<li><p>Read the documentation for <code>facet_wrap()</code>.
What arguments can you use to control how many rows and columns appear in the output?</p></li>
<li><p>What does the <code>scales</code> argument to <code>facet_wrap()</code> do?
When might you use it?</p></li>
</ol>
</div>
<div id="coordinates---plot-geoms" class="section level3 hasAnchor" number="3.1.8">
<h3><span class="header-section-number">3.1.8</span> Coordinates - Plot geoms<a href="data.html#coordinates---plot-geoms" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can view the coordinates part of the plot as an interpreter of position aesthetics. While typically Cartesian coordinates are used, the coordinate system powers the display of map projections and polar plots.</p>
<p>We can also use coordinates to display a plot with a fixed aspect ratio so that one unit has the same length in both the x and y directions. The coord_fixed() function sets this ratio automatically.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data.html#cb15-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cty, hwy)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="data.html#cb15-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb15-3"><a href="data.html#cb15-3" tabindex="-1"></a>  <span class="fu">coord_fixed</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="boxy">
<p>You might guess that by substituting <code>geom_point()</code> for a different geom function, you‚Äôd get a different type of plot.</p>
<p><strong>That‚Äôs a great guess!</strong></p>
</div>
<p>In the following sections, you‚Äôll learn about some of the other important geoms provided in ggplot2.
This isn‚Äôt an exhaustive list, but should cover the most commonly used plot types.</p>
<div class="boxy">
<ul>
<li><p><code>geom_smooth()</code> fits a smoother to the data and displays the smooth and its standard error.</p></li>
<li><p><code>geom_boxplot()</code> produces a box-and-whisker plot to summarise the distribution of a set of points.</p></li>
<li><p><code>geom_histogram()</code> and <code>geom_freqpoly()</code> show the distribution of continuous variables.</p></li>
<li><p><code>geom_bar()</code> shows the distribution of categorical variables.</p></li>
<li><p><code>geom_path()</code> and <code>geom_line()</code> draw lines between the data points.
A line plot is constrained to produce lines that travel from left to right, while paths can go in any direction.
Lines are typically used to explore how things change over time.</p></li>
</ul>
</div>
</div>
<div id="adding-a-smoother-to-a-plot" class="section level3 hasAnchor" number="3.1.9">
<h3><span class="header-section-number">3.1.9</span> Adding a smoother to a plot<a href="data.html#adding-a-smoother-to-a-plot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you have a scatterplot with a lot of noise, it can be hard to see the dominant pattern.</p>
<p>In this case it‚Äôs useful to add a smoothed line to the plot with <code>geom_smooth()</code>: </p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data.html#cb16-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb16-2"><a href="data.html#cb16-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb16-3"><a href="data.html#cb16-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>()</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>This overlays the scatterplot with a smooth curve, including an assessment of uncertainty in the form of point-wise confidence intervals shown in grey.</p>
<p>If you‚Äôre not interested in the confidence interval, turn it off with <code>geom_smooth(se = FALSE)</code>.</p>
<p>An important argument to <code>geom_smooth()</code> is the <code>method</code>, which allows you to choose which type of model is used to fit the smooth curve:</p>
<ul>
<li><p><code>method = "loess"</code>, the default for small n, uses a smooth local regression (as described in <code>?loess</code>).</p>
<p>The wiggliness of the line is controlled by the <code>span</code> parameter, which ranges from 0 (exceedingly wiggly) to 1 (not so wiggly).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data.html#cb18-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb18-2"><a href="data.html#cb18-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb18-3"><a href="data.html#cb18-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">span =</span> <span class="fl">0.2</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data.html#cb20-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb20-2"><a href="data.html#cb20-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb20-3"><a href="data.html#cb20-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">span =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula = &#39;y ~ x&#39;</code></pre>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-15-2.png" width="672" /></p>
<p>Loess does not work well for large datasets (it‚Äôs <span class="math inline">\(O(n^2)\)</span> in memory), so an alternative smoothing algorithm is used when <span class="math inline">\(n\)</span> is greater than 1,000.</p></li>
<li><p><code>method = "gam"</code> fits a generalised additive model provided by the <strong>mgcv</strong> package.</p>
<p>You need to first load mgcv, then use a formula like <code>formula = y ~ s(x)</code> or <code>y ~ s(x, bs = "cs")</code> (for large data).</p>
<p>This is what ggplot2 uses when there are more than 1,000 points.
</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data.html#cb22-1" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb22-2"><a href="data.html#cb22-2" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb22-3"><a href="data.html#cb22-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb22-4"><a href="data.html#cb22-4" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;gam&quot;</span>, <span class="at">formula =</span> y <span class="sc">~</span> <span class="fu">s</span>(x))</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p></li>
<li><p><code>method = "lm"</code> fits a linear model, giving the line of best fit.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data.html#cb23-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span> </span>
<span id="cb23-2"><a href="data.html#cb23-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb23-3"><a href="data.html#cb23-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<pre><code>## `geom_smooth()` using formula = &#39;y ~ x&#39;</code></pre>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p></li>
<li><p><code>method = "rlm"</code> works like <code>lm()</code>, but uses a robust fitting algorithm so that outliers don‚Äôt affect the fit as much.
It‚Äôs part of the <strong>MASS</strong> package, so remember to load that first.
</p></li>
</ul>
</div>
<div id="sec-boxplot" class="section level3 hasAnchor" number="3.1.10">
<h3><span class="header-section-number">3.1.10</span> Boxplots and jittered points<a href="data.html#sec-boxplot" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When a set of data includes a categorical variable and one or more continuous variables, you will probably be interested to know how the values of the continuous variables vary with the levels of the categorical variable.</p>
<p>Say we‚Äôre interested in seeing how fuel economy varies within cars that have the same kind of drivetrain.</p>
<p>We might start with a scatterplot like this:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data.html#cb25-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(drv, hwy)) <span class="sc">+</span> </span>
<span id="cb25-2"><a href="data.html#cb25-2" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>Because there are few unique values of both <code>drv</code> and <code>hwy</code>, there is a lot of overplotting.</p>
<p>Many points are plotted in the same location, and it‚Äôs difficult to see the distribution.</p>
<p>There are three useful techniques that help alleviate the problem:</p>
<ul>
<li><p>Jittering, <code>geom_jitter()</code>, adds a little random noise to the data which can help avoid overplotting.
</p></li>
<li><p>Boxplots, <code>geom_boxplot()</code>, summarise the shape of the distribution with a handful of summary statistics.
</p></li>
<li><p>Violin plots, <code>geom_violin()</code>, show a compact representation of the ‚Äúdensity‚Äù of the distribution, highlighting the areas where more points are found.
</p></li>
</ul>
<p>These are illustrated below:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data.html#cb26-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(drv, hwy)) <span class="sc">+</span> <span class="fu">geom_jitter</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data.html#cb27-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(drv, hwy)) <span class="sc">+</span> <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-19-2.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data.html#cb28-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(drv, hwy)) <span class="sc">+</span> <span class="fu">geom_violin</span>()</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-19-3.png" width="672" /></p>
<p>Each method has its strengths and weaknesses.
Boxplots summarise the bulk of the distribution with only five numbers, while jittered plots show every point but only work with relatively small datasets.
Violin plots give the richest display, but rely on the calculation of a density estimate, which can be hard to interpret.</p>
<p>For jittered points, <code>geom_jitter()</code> offers the same control over aesthetics as <code>geom_point()</code>: <code>size</code>, <code>colour</code>, and <code>shape</code>.
For <code>geom_boxplot()</code> and <code>geom_violin()</code>, you can control the outline <code>colour</code> or the internal <code>fill</code> colour.</p>
</div>
<div id="sec-distribution" class="section level3 hasAnchor" number="3.1.11">
<h3><span class="header-section-number">3.1.11</span> Histograms and frequency polygons<a href="data.html#sec-distribution" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Histograms and frequency polygons show the distribution of a single numeric variable.
They provide more information about the distribution of a single group than boxplots do, at the expense of needing more space.
</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data.html#cb29-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span> <span class="fu">geom_histogram</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="data.html#cb31-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span> <span class="fu">geom_freqpoly</span>()</span></code></pre></div>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-20-2.png" width="672" /></p>
<p>Both histograms and frequency polygons work in the same way: they bin the data, then count the number of observations in each bin.
The only difference is the display: histograms use bars and frequency polygons use lines.</p>
<p>You can control the width of the bins with the <code>binwidth</code> argument (if you don‚Äôt want evenly spaced bins you can use the <code>breaks</code> argument).
It is <strong>very important</strong> to experiment with the bin width.
The default just splits your data into 30 bins, which is unlikely to be the best choice.
You should always try many bin widths, and you may find you need multiple bin widths to tell the full story of your data.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="data.html#cb33-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span> </span>
<span id="cb33-2"><a href="data.html#cb33-2" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="fl">2.5</span>)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data.html#cb34-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(hwy)) <span class="sc">+</span> </span>
<span id="cb34-2"><a href="data.html#cb34-2" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-21-2.png" width="672" /></p>
<p>An alternative to the frequency polygon is the density plot, <code>geom_density()</code>.
A little care is required if you‚Äôre using density plots: compared to frequency polygons they are harder to interpret since the underlying computations are more complex.
They also make assumptions that are not true for all data, namely that the underlying distribution is continuous, unbounded, and smooth.</p>
<p>To compare the distributions of different subgroups, you can map a categorical variable to either fill (for <code>geom_histogram()</code>) or colour (for <code>geom_freqpoly()</code>).
It‚Äôs easier to compare distributions using the frequency polygon because the underlying perceptual task is easier.
You can also use faceting: this makes comparisons a little harder, but it‚Äôs easier to see the distribution of each group.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="data.html#cb35-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, <span class="at">colour =</span> drv)) <span class="sc">+</span> </span>
<span id="cb35-2"><a href="data.html#cb35-2" tabindex="-1"></a>  <span class="fu">geom_freqpoly</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data.html#cb36-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, <span class="at">fill =</span> drv)) <span class="sc">+</span> </span>
<span id="cb36-2"><a href="data.html#cb36-2" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb36-3"><a href="data.html#cb36-3" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>drv, <span class="at">ncol =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
</div>
<div id="theme" class="section level3 hasAnchor" number="3.1.12">
<h3><span class="header-section-number">3.1.12</span> Theme<a href="data.html#theme" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The theme system controls almost any visuals of the plot that are not controlled by the data and is therefore important for the look and feel of the plot. You can use the theme for customizations ranging from changing the location of the legends to setting the background color of the plot. Many elements in the theme are hierarchical in that setting the look of the general axis line affects those of the x and y axes simultaneously.</p>
<p>To tweak the look of the plot, one can use many of the built-in theme_<em>() functions and/or detail specific aspects with the theme() function. The element_</em>() functions control the graphical attributes of theme components.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data.html#cb37-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cty, hwy, <span class="at">colour =</span> class)) <span class="sc">+</span></span>
<span id="cb37-2"><a href="data.html#cb37-2" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb37-3"><a href="data.html#cb37-3" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb37-4"><a href="data.html#cb37-4" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb37-5"><a href="data.html#cb37-5" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb37-6"><a href="data.html#cb37-6" tabindex="-1"></a>    <span class="at">axis.line =</span> <span class="fu">element_line</span>(<span class="at">linewidth =</span> <span class="fl">0.75</span>),</span>
<span id="cb37-7"><a href="data.html#cb37-7" tabindex="-1"></a>    <span class="at">axis.line.x.bottom =</span> <span class="fu">element_line</span>(<span class="at">colour =</span> <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb37-8"><a href="data.html#cb37-8" tabindex="-1"></a>  )</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
</div>
<div id="combining" class="section level3 hasAnchor" number="3.1.13">
<h3><span class="header-section-number">3.1.13</span> Combining<a href="data.html#combining" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As mentioned at the start, you can layer all of the pieces to build a customized plot of your data, like the one shown at the beginning of this vignette:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data.html#cb38-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cty, hwy)) <span class="sc">+</span></span>
<span id="cb38-2"><a href="data.html#cb38-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">colour =</span> displ)) <span class="sc">+</span></span>
<span id="cb38-3"><a href="data.html#cb38-3" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>) <span class="sc">+</span></span>
<span id="cb38-4"><a href="data.html#cb38-4" tabindex="-1"></a>  <span class="fu">scale_colour_viridis_c</span>() <span class="sc">+</span></span>
<span id="cb38-5"><a href="data.html#cb38-5" tabindex="-1"></a>  <span class="fu">facet_grid</span>(year <span class="sc">~</span> drv) <span class="sc">+</span></span>
<span id="cb38-6"><a href="data.html#cb38-6" tabindex="-1"></a>  <span class="fu">coord_fixed</span>() <span class="sc">+</span></span>
<span id="cb38-7"><a href="data.html#cb38-7" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb38-8"><a href="data.html#cb38-8" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">panel.grid.minor =</span> <span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="exercises-2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": false,
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["DataVizR_Workshop.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
