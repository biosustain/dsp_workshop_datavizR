<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3.1 Data | Data Visualization in R</title>
  <meta name="description" content="3.1 Data | Data Visualization in R" />
  <meta name="generator" content="bookdown 0.43 and GitBook 2.6.7" />

  <meta property="og:title" content="3.1 Data | Data Visualization in R" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3.1 Data | Data Visualization in R" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="analysis.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="assets/report.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a>
<ul>
<li class="chapter" data-level="2.1" data-path="goals.html"><a href="goals.html"><i class="fa fa-check"></i><b>2.1</b> Goals</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>3</b> Introduction</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3.1</b> Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#understanding-the-grammar-of-the-plots"><i class="fa fa-check"></i><b>3.1.1</b> Understanding the grammar of the plots</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#mapping"><i class="fa fa-check"></i><b>3.1.2</b> Mapping</a></li>
<li class="chapter" data-level="3.1.3" data-path="data.html"><a href="data.html#layers"><i class="fa fa-check"></i><b>3.1.3</b> Layers</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>4</b> Analysis</a>
<ul>
<li class="chapter" data-level="4.1" data-path="install-tidyverse.html"><a href="install-tidyverse.html"><i class="fa fa-check"></i><b>4.1</b> Install tidyverse</a></li>
<li class="chapter" data-level="4.2" data-path="load-tidyverse.html"><a href="load-tidyverse.html"><i class="fa fa-check"></i><b>4.2</b> Load tidyverse</a></li>
<li class="chapter" data-level="4.3" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html"><i class="fa fa-check"></i><b>4.3</b> Load and prepare the data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="load-and-prepare-the-data.html"><a href="load-and-prepare-the-data.html#data-transformation"><i class="fa fa-check"></i><b>4.3.1</b> Data transformation</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="data-aggregation.html"><a href="data-aggregation.html"><i class="fa fa-check"></i><b>4.4</b> Data aggregation</a></li>
<li class="chapter" data-level="4.5" data-path="remove-contaminants.html"><a href="remove-contaminants.html"><i class="fa fa-check"></i><b>4.5</b> Remove contaminants</a></li>
<li class="chapter" data-level="4.6" data-path="cleaning-names.html"><a href="cleaning-names.html"><i class="fa fa-check"></i><b>4.6</b> Cleaning names</a></li>
<li class="chapter" data-level="4.7" data-path="plot-overall-intensity-distribution-per-replicate.html"><a href="plot-overall-intensity-distribution-per-replicate.html"><i class="fa fa-check"></i><b>4.7</b> Plot overall intensity distribution per replicate</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="plot-overall-intensity-distribution-per-replicate.html"><a href="plot-overall-intensity-distribution-per-replicate.html#perform-principal-component-analysis-pca"><i class="fa fa-check"></i><b>4.7.1</b> Perform Principal Component Analysis (PCA)</a></li>
<li class="chapter" data-level="4.7.2" data-path="plot-overall-intensity-distribution-per-replicate.html"><a href="plot-overall-intensity-distribution-per-replicate.html#identify-and-plot-proteins-with-highest-fold-change-between-conditions"><i class="fa fa-check"></i><b>4.7.2</b> Identify and plot proteins with highest fold-change between conditions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualization.html"><a href="visualization.html"><i class="fa fa-check"></i><b>5</b> Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="printing-all-package-versions-good-practice-to-ensure-reproducibility.html"><a href="printing-all-package-versions-good-practice-to-ensure-reproducibility.html"><i class="fa fa-check"></i><b>5.1</b> Printing all package versions (good practice to ensure reproducibility)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="wrap.html"><a href="wrap.html"><i class="fa fa-check"></i><b>6</b> Wrap</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Visualization in R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As the foundation of every graphic, <code>ggplot2</code> uses data to construct a plot. The system works best if the data is provided in a <code>tidy</code> format (we‚Äôre going to explorer it in the next section), which briefly means a rectangular data frame structure where rows are observations and columns are variables.</p>
<p>As the first step in many plots, you would pass the data to the <code>ggplot()</code> function, which stores the data to be used later by other parts of the plotting system. For example, if we intend to make a graphic about the mpg dataset, we would start as follows:</p>
<div class="remember">
<p><strong>üìå Remember:</strong> Load the library before starting the analysis.</p>
</div>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data.html#cb1-1" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-2"><a href="data.html#cb1-2" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">&quot;ggplot2&quot;</span>)</span>
<span id="cb1-3"><a href="data.html#cb1-3" tabindex="-1"></a>mpg</span></code></pre></div>
<pre><code>## # A tibble: 234 √ó 11
##    manufacturer model      displ  year   cyl trans   drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4           1.8  1999     4 auto(l‚Ä¶ f        18    29 p     comp‚Ä¶
##  2 audi         a4           1.8  1999     4 manual‚Ä¶ f        21    29 p     comp‚Ä¶
##  3 audi         a4           2    2008     4 manual‚Ä¶ f        20    31 p     comp‚Ä¶
##  4 audi         a4           2    2008     4 auto(a‚Ä¶ f        21    30 p     comp‚Ä¶
##  5 audi         a4           2.8  1999     6 auto(l‚Ä¶ f        16    26 p     comp‚Ä¶
##  6 audi         a4           2.8  1999     6 manual‚Ä¶ f        18    26 p     comp‚Ä¶
##  7 audi         a4           3.1  2008     6 auto(a‚Ä¶ f        18    27 p     comp‚Ä¶
##  8 audi         a4 quattro   1.8  1999     4 manual‚Ä¶ 4        18    26 p     comp‚Ä¶
##  9 audi         a4 quattro   1.8  1999     4 auto(l‚Ä¶ 4        16    25 p     comp‚Ä¶
## 10 audi         a4 quattro   2    2008     4 manual‚Ä¶ 4        20    28 p     comp‚Ä¶
## # ‚Ñπ 224 more rows</code></pre>
<div class="tip">
<p><strong>üí° Tip:</strong> You can use the command <code>View</code> to visualize the data. Try it yourself.</p>
</div>
<div class="advanced">
<p><strong>üß† Advanced:</strong> <a href="https://rstudio.github.io/DT/">DT</a> package is an excellent option to explore the metadata! Try it yourself.</p>
</div>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data.html#cb3-1" tabindex="-1"></a><span class="fu">library</span>(DT)</span>
<span id="cb3-2"><a href="data.html#cb3-2" tabindex="-1"></a></span>
<span id="cb3-3"><a href="data.html#cb3-3" tabindex="-1"></a><span class="co">#Simple</span></span>
<span id="cb3-4"><a href="data.html#cb3-4" tabindex="-1"></a><span class="fu">datatable</span>(<span class="fu">head</span>(mpg), <span class="at">class =</span> <span class="st">&#39;cell-border stripe&#39;</span>)</span>
<span id="cb3-5"><a href="data.html#cb3-5" tabindex="-1"></a></span>
<span id="cb3-6"><a href="data.html#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="data.html#cb3-7" tabindex="-1"></a><span class="co">#Complex</span></span>
<span id="cb3-8"><a href="data.html#cb3-8" tabindex="-1"></a>DT<span class="sc">::</span><span class="fu">datatable</span>(<span class="at">data =</span> mpg, <span class="at">rownames =</span> <span class="cn">FALSE</span>, </span>
<span id="cb3-9"><a href="data.html#cb3-9" tabindex="-1"></a>              <span class="at">extensions =</span> <span class="fu">c</span>(<span class="st">&#39;Buttons&#39;</span>, <span class="st">&#39;Scroller&#39;</span>), </span>
<span id="cb3-10"><a href="data.html#cb3-10" tabindex="-1"></a>              <span class="at">options =</span> <span class="fu">list</span>(<span class="at">dom =</span> <span class="st">&#39;Bfrtip&#39;</span>, <span class="at">buttons =</span> <span class="fu">c</span>(<span class="st">&#39;copy&#39;</span>, <span class="st">&#39;csv&#39;</span>),</span>
<span id="cb3-11"><a href="data.html#cb3-11" tabindex="-1"></a>                             <span class="at">deferRender =</span> <span class="cn">TRUE</span>, <span class="at">scrollX =</span> T,</span>
<span id="cb3-12"><a href="data.html#cb3-12" tabindex="-1"></a>                             <span class="at">scrollX =</span> T,</span>
<span id="cb3-13"><a href="data.html#cb3-13" tabindex="-1"></a>                             <span class="at">scrollY =</span> <span class="dv">200</span>,</span>
<span id="cb3-14"><a href="data.html#cb3-14" tabindex="-1"></a>                             <span class="at">scroller =</span> <span class="cn">TRUE</span>,</span>
<span id="cb3-15"><a href="data.html#cb3-15" tabindex="-1"></a>                             <span class="at">caption =</span> <span class="st">&#39;mpg metadata&#39;</span>))</span></code></pre></div>
<p><code>mpg</code> includes information about the fuel economy of popular car models in 1999 and 2008, collected by the <a href="http://fueleconomy.gov">US Environmental Protection Agency</a></p>
<p>The variables are mostly self-explanatory:</p>
<p><code class="var-blue">cty</code> and <code class="var-blue">hwy</code> record miles per gallon (mpg) for city and highway driving.</p>
<p><code class="var-orange">displ</code> is the engine displacement in litres.</p>
<p><code class="var-blue">drv</code> is the drivetrain: front wheel (f), rear wheel (r) or four wheel (4).</p>
<p><code class="var-blue">model</code> is the model of car. There are 38 models, selected because they had a new edition every year between 1999 and 2008.</p>
<p><code class="var-orange">class</code> is a categorical variable describing the ‚Äútype‚Äù of car: two seater, SUV, compact, etc.</p>
<p>This dataset suggests many interesting questions.</p>
<p>How are engine size and fuel economy related? Do certain manufacturers care more about fuel economy than others? Has fuel economy improved in the last ten years? We will try to answer some of these questions, and in the process learn how to create some basic plots with ggplot2.</p>
<div id="understanding-the-grammar-of-the-plots" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Understanding the grammar of the plots<a href="data.html#understanding-the-grammar-of-the-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code data="var-orange">data</code></p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data.html#cb4-1" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> mpg)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<div class="question">
<p><strong>‚ùì Question:</strong> Why is it empty?</p>
</div>
</div>
<div id="mapping" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Mapping<a href="data.html#mapping" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The mapping of a plot is a set of instructions on how parts of the data are mapped onto aesthetic attributes of geometric objects. It is the ‚Äòdictionary‚Äô to translate tidy data to the graphics system.</p>
<p>A mapping can be made by using the <code data="var-orange">aes()</code> function to make pairs of graphical attributes and parts of the data. If we want the cty and hwy columns to map to the x- and y-coordinates in the plot, we can do that as follows:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data.html#cb5-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> cty, <span class="at">y =</span> hwy))</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="layers" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Layers<a href="data.html#layers" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The heart of any graphic is the layers. They take the mapped data and display it in something humans can understand as a representation of the data. Every layer consists of three important parts:</p>
<p>The geometry that determines how data are displayed, such as points, lines, or rectangles.
The statistical transformation that may compute new variables from the data and affect what of the data is displayed.
The position adjustment that primarily determines where a piece of data is being displayed.
A layer can be constructed using the geom_<em>() and stat_</em>() functions. These functions often determine one of the three parts of a layer, while the other two can still be specified. Here is how we can use two layers to display the cty and hwy columns of the mpg dataset as points and stack a trend line on top.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data.html#cb6-1" tabindex="-1"></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(cty, hwy)) <span class="sc">+</span></span>
<span id="cb6-2"><a href="data.html#cb6-2" tabindex="-1"></a>  <span class="co"># to create a scatterplot</span></span>
<span id="cb6-3"><a href="data.html#cb6-3" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb6-4"><a href="data.html#cb6-4" tabindex="-1"></a>  <span class="co"># to fit and overlay a loess trendline</span></span>
<span id="cb6-5"><a href="data.html#cb6-5" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">formula =</span> y <span class="sc">~</span> x, <span class="at">method =</span> <span class="st">&quot;lm&quot;</span>)</span></code></pre></div>
<p><img src="DataVizR_Workshop_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>

</div>
</div>
<!-- </div> -->
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": false,
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": null,
    "text": null
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["DataVizR_Workshop.pdf"],
  "search": {
    "engine": "fuse",
    "options": null
  },
  "toc": {
    "collapse": "section"
  }
});
});
</script>

</body>

</html>
